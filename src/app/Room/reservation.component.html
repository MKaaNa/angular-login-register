<div class="reservation-container">
    <!-- Oda tipi seçimi -->
    <div>
        <label for="roomType">Room Type:</label>
        <select id="roomType" [(ngModel)]="selectedRoomType" name="roomType">
            <option value="">-- Select Room Type --</option>
            <option value="single">Single</option>
            <option value="double">Double</option>
            <option value="suite">Suite</option>
        </select>
    </div>

    <!-- Konuk sayısı seçimi -->
    <div>
        <label for="guestCount">Number of Guests:</label>
        <select id="guestCount" [(ngModel)]="selectedGuestCount" name="guestCount">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </div>

    <!-- Başlangıç tarihi seçimi -->
    <div>
        <label for="startDate">Start Date:</label>
        <input type="date" id="startDate" [(ngModel)]="startDate" name="startDate">
    </div>

    <!-- Bitiş tarihi seçimi -->
    <div>
        <label for="endDate">End Date:</label>
        <input type="date" id="endDate" [(ngModel)]="endDate" name="endDate">
    </div>


    <!-- Odalar varsa gösterim yap -->
    <div *ngIf="rooms.length > 0" class="room-grid">
        <div class="room-card" *ngFor="let room of rooms">
            <h3>{{ room.roomType | titlecase }}</h3>
            <p><strong>Guests:</strong> {{ room.guestCount }}</p>
            <p><strong>Price:</strong> ${{ room.price }}</p>
            <p><strong>Start Date:</strong> {{ room.startDate }}</p>
            <p><strong>End Date:</strong> {{ room.endDate }}</p>
            <button (click)="showRoomDetails(room)">About</button>
        </div>
    </div>


    <!-- Oda tipi ve misafir sayısı ile birlikte tarihleri kullanarak filtreleme -->
    <button (click)="getAvailableRooms(selectedRoomType, selectedGuestCount, startDate, endDate)">
        Show Available Rooms
    </button>

    <!-- Room Details Popup -->
    <div *ngIf="showRoomDetailsPopup" class="popup">
        <div class="popup-content">
            <span class="popup-close" (click)="closeRoomDetailsPopup()">×</span>
            <h3>{{ selectedRoomDetails?.roomType | titlecase }} Room</h3>

            <!-- Image slider (Resimler arası geçiş için)-->
            <div class="image-slider" *ngIf="selectedRoomDetails?.images?.length > 0">
                <button class="slider-button left" (click)="changeImage(-1)">&#10094;</button>
                <img *ngIf="imageIndex >= 0" [src]="'assets/images/' + selectedRoomDetails?.images[imageIndex]"
                    alt="Room Image" class="popup-room-image">
                <button class="slider-button right" (click)="changeImage(1)">&#10095;</button>
            </div>

            <!-- Eğer resim yoksa uyarı mesajı -->
            <div *ngIf="imageIndex < 0">
                <p>No images available for this room.</p>
            </div>

            <p>{{ selectedRoomDetails?.description }}</p>
        </div>
    </div>

    <!-- No Rooms Available Popup -->
    <div *ngIf="showNoRoomsPopup" class="popup">
        <div class="popup-content">
            <span class="popup-close" (click)="closePopup()">×</span>
            <p>No rooms available for the selected criteria.</p>
        </div>
    </div>

    <!-- Hata mesajı varsa -->
    <div *ngIf="errorMessage">
        <p>{{ errorMessage }}</p>
    </div>
</div>